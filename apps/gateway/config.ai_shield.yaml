model_list:
  - model_name: gpt-5.2
    litellm_params:
      model: openai/gpt-5.2
      api_key: os.environ/OPENAI_API_KEY
  - model_name: gpt-5.1
    litellm_params:
      model: openai/gpt-5.1
      api_key: os.environ/OPENAI_API_KEY
  - model_name: gpt-5
    litellm_params:
      model: openai/gpt-5
      api_key: os.environ/OPENAI_API_KEY
  - model_name: gpt-4.1
    litellm_params:
      model: openai/gpt-4.1
      api_key: os.environ/OPENAI_API_KEY
  - model_name: gpt-4o
    litellm_params:
      model: openai/gpt-4o
      api_key: os.environ/OPENAI_API_KEY
  - model_name: gpt-4o-mini
    litellm_params:
      model: openai/gpt-4o-mini
      api_key: os.environ/OPENAI_API_KEY

litellm_settings:
  callbacks: [detect_prompt_injection, custom_callbacks.ai_shield_callback, langfuse]
  success_callback: [langfuse]
  failure_callback: [langfuse]
  prompt_injection_params:
    heuristics_check: true
    similarity_check: true
    llm_api_check: false

general_settings:
  master_key: os.environ/LITELLM_MASTER_KEY
  database_url: os.environ/DATABASE_URL
  store_model_in_db: true
  store_usage_in_db: true
  store_events_in_db: true
  supported_db_objects:
    - key
    - team
    - user
    - mcp
    - spend_logs
    - audit_logs
  cache: redis
  cache_params:
    host: redis
    port: 6379
    db: 0
  langfuse_public_key: os.environ/LANGFUSE_PUBLIC_KEY
  langfuse_secret_key: os.environ/LANGFUSE_SECRET_KEY
  langfuse_host: os.environ/LANGFUSE_HOST

guardrails:
  # Security: Presidio PII Detection
  # presidio_filter_scope: both = prüft sowohl Input (Messages + Tool Args) als auch Output (Responses + Tool Responses)
  # mode: [pre_call, post_call] = prüft vor und nach LLM-Call
  - guardrail_name: ai-shield-presidio
    litellm_params:
      guardrail: presidio
      mode: [pre_call, post_call]
      default_on: true
      presidio_language: de
      presidio_filter_scope: both  # Security: Prüft Messages UND Tool Arguments/Responses
      pii_entities_config:
        CREDIT_CARD: BLOCK
        EMAIL_ADDRESS: MASK
        PHONE_NUMBER: MASK
      presidio_score_thresholds:
        ALL: 0.7
  - guardrail_name: ai-shield-tool-permission
    litellm_params:
      guardrail: tool_permission
      mode: post_call
      default_on: true
      rules:
        - id: deny_destructive_tools
          tool_name: '(?i).*(delete|remove|drop|destroy|shutdown|wipe|truncate|rm|kill|exec|shell|bash|powershell).*'
          decision: deny
      default_action: allow
      on_disallowed_action: rewrite
      violation_message_template: "Tool '{tool_name}' blocked by AI Shield policy"
